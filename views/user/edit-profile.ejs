<!DOCTYPE HTML>
<html>
	<head>
	<title>CRUX | Product List</title>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
	<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,600,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Rokkitt:100,300,400,700" rel="stylesheet">
	
	<!-- Animate.css -->
	<link rel="stylesheet" href="/front/css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="/front/css/icomoon.css">
	<!-- Ion Icon Fonts-->
	<link rel="stylesheet" href="/front/css/ionicons.min.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="/front/css/bootstrap.min.css">

	<!-- Magnific Popup -->
	<link rel="stylesheet" href="/front/css/magnific-popup.css">

	<!-- Flexslider  -->
	<link rel="stylesheet" href="/front/css/flexslider.css">

	<!-- Owl Carousel -->
	<link rel="stylesheet" href="/front/css/owl.carousel.min.css">
	<link rel="stylesheet" href="/front/css/owl.theme.default.min.css">
	
	<!-- Date Picker -->
	<link rel="stylesheet" href="/front/css/bootstrap-datepicker.css">
	<!-- Flaticons  -->
	<link rel="stylesheet" href="/front/fonts/flaticon/font/flaticon.css">

	<!-- Theme style  -->
	<link rel="stylesheet" href="/front/css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        /* Profile Sidebar */
    .profile-sidebar {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
    }
    .profile-image img {
        width: 100px;
        height: 100px;
        border-radius: 50%;
    }
    .profile-sidebar .list-group-item {
        border: none;
        background: none;
    }
    .profile-sidebar .list-group-item a {
        text-decoration: none;
        color: #333;
    }
    .profile-sidebar .list-group-item.active a {
        font-weight: bold;
        color: #007bff;
    }

    /* Profile Content */
    .card {
        border-radius: 10px;
        box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.1);
    }
    </style>

    </head>
    <body>
        <%- include('./userPartials/header') %> 

        <div class="container mt-5">
            <div class="row">
                <!-- Sidebar -->
                <div class="col-md-3">
                    <div class="profile-sidebar">
                        <div class="profile-image text-center">
                            <img src="<%= user.image %>" alt="Profile Picture" class="rounded-circle">
                            <h3 class="mt-2"><%= user.fullName %></h3>
                        </div>
                        <ul class="list-group mt-3">
                            <li class="list-group-item active"><a href="/profile">Account Overview</a></li>
                            <li class="list-group-item"><a href="/orders">My Orders</a></li>
                            <li class="list-group-item"><a href="/addresses">Manage Addresses</a></li>
                            <li class="list-group-item"><a href="/wallet">Wallet</a></li>
                            <li class="list-group-item"><a href="/coupons">Coupons</a></li>
                            <li class="list-group-item"><a href="/logout">Logout</a></li>
                        </ul>
                    </div>
                </div>
        
                <div class="col-md-9 mb-4">
                    <div class="card p-4">
                        <h2>Edit Profile</h2>
                        <form action="/profile/update" method="POST" enctype="multipart/form-data">
                            <label>Full Name</label>
                            <input type="text" class="form-control mb-2" name="fullName" value="<%= user.fullName %>" required>
                                
                        
                            <label>Phone Number</label>
                            <input type="text" class="form-control mb-2" name="phone" value="<%= user.mobile %>">
        
                            <label>Profile Image</label>
                            <input type="file" class="form-control mb-3" name="profileImage">
        
                            <button type="submit" class="btn btn-success">Save Changes</button>
                        </form>
                    </div>
                

                <div class="col-md-10 mb-4">
                <div class="card p-4 mt-4">
                    <h2>Email Verification</h2>                    
                        <input type="email" class="form-control mb-2 me-4" name="email" value="<%= user.email %>" required>
                            <button type="button" class="btn btn-outline-primary btn-sm" id="sendOtp" onclick="verifyEmail()">Verify Email</button>
                            <input type="text" class="form-control mb-2 mt-2" name="otp" placeholder="Enter OTP">
                        <button type="submit" class="btn btn-danger btn-sm">Verify OTP</button>
                        <button class="btn btn-secondary" disabled>Resend OTP</button>          
                </div>
            </div>
        </div>
    
     
    </div>
</div>

        <%- include('./userPartials/footer') %> 

        <script>
             function verifyEmail() {
                fetch("/email-verify", {    
                    method: "PUT",
                    body: JSON.stringify({ email: document.querySelector('[name="email"]').value }),
                    headers: { "Content-Type": "application/json" }
                }).then(response => response.json())
                .then(data => alert(data.message));
            };
        </script>

       
        
    </body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    </html>